/**
 * @summary Main JS of Ajax Product Search for WooCommerce
 *
 * @version   1.0.0
 * @since     1.0.0
 * @requires  jQuery.js
 */
jQuery(function(t){var e={init:function(){e.activate_select2()},minimum_input_length:function(t){return"undefined"!=typeof t.attr("multiple")?0:3},closeOnSelect:function(t){return"undefined"==typeof t.attr("multiple")},activate_select2:function(){var a=t(alg_wc_aps.search_input_css_selector);a.each(function(){var a=t(this);a.select2({minimumResultsForSearch:1/0,maximumInputLength:40,minimumInputLength:e.minimum_input_length(a),closeOnSelect:e.closeOnSelect(a),placeholder:a.attr("placeholder")||"",ajax:{cache:!0,url:alg_wc_aps.ajaxurl,dataType:"json",delay:250,data:function(e){var n={s:e.term,action:alg_wc_aps.ajax_actions.search_products,page:e.page||1};return a.each(function(){t.each(this.attributes,function(){this.specified&&this.name.indexOf("data-")!=-1&&(n[this.name.replace("data-","")]=this.value)})}),n},processResults:function(t,e){return e.page=e.page||1,{results:t.data.items,pagination:{more:e.page*t.data.posts_per_page<t.data.total_count}}},cache:!0},templateResult:function(t){return"function"==typeof wc_aps_template_result?wc_aps_template_result(t):t.default?'<div class="alg-wc-aps-default" style="font-weight:bold;text-transform:uppercase">'+t.text+"</div>":t.text},escapeMarkup:function(t){return t},language:{inputTooShort:function(t){var e=t.minimum-t.input.length,a=alg_wc_aps.select2_args.inputTooShort;return a=a.replace("%d",e)},inputTooLong:function(t){var e=t.input.length-t.maximum,a=alg_wc_aps.select2_args.inputTooLong;return a=a.replace("%d",e)},errorLoading:function(){return alg_wc_aps.select2_args.errorLoading},loadingMore:function(){return alg_wc_aps.select2_args.loadingMore},searching:function(){return alg_wc_aps.select2_args.searching},noResults:function(){return alg_wc_aps.select2_args.noResults}}})}),a.on("select2:select",function(t){t.preventDefault();var e=!1;"undefined"!=typeof t.target.attributes["data-redirect"]&&(e=!0),"undefined"!=typeof t.target.attributes.multiple&&(e="undefined"!=typeof t.params.data.default&&1==t.params.data.default),e&&(window.location.href=t.params.data.permalink)}),a.on("change",function(t){a.resize()})}};e.init()});